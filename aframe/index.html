<!DOCTYPE html>
<html>
  <head>
    <title>3D Gallery with Hair</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <style>
      .hidden {
        display: none;
      }
    </style>
  </head>
  <body>
    <a-scene vr-mode-ui="enabled: false">
      <a-assets>
        <img id="photo1" src="./zilums.jpg" class="hidden"> <!-- Ensure this is a JPEG file -->
        <img id="photo2" src="./zilums1.jpeg" class="hidden"> <!-- Ensure this is a JPEG file -->
        <img id="photo3" src="./zilums2.jpeg" class="hidden"> <!-- Ensure this is a JPEG file -->
        <img id="hairTexture" src="./hair_texture.png">
      </a-assets>

      <!-- Lighting -->
      <a-light type="ambient" color="#ffffff"></a-light>
      <a-light type="point" position="2 4 -3" intensity="1"></a-light>

      <!-- Floor -->
      <a-plane position="0 0 0" rotation="-90 0 0" width="10" height="10" color="#000" shadow="receive: true"></a-plane>
      
      <!-- Ceiling -->
      <a-plane position="0 5 0" rotation="90 0 0" width="10" height="10" color="#FFC0CB" shadow="receive: true"></a-plane>

      <!-- Walls -->
      <a-plane position="0 2.5 -5" width="10" height="5" color="#FFF"></a-plane>
      <a-plane position="0 2.5 5" rotation="0 180 0" width="10" height="5" color="#FFF"></a-plane>
      <a-plane position="-5 2.5 0" rotation="0 90 0" width="10" height="5" color="#FFF"></a-plane>
      <a-plane position="5 2.5 0" rotation="0 -90 0" width="10" height="5" color="#FFF"></a-plane>
      
      <!-- Photographs -->
      <a-plane position="0 2.5 -4.95" width="4" height="3" material="src: #photo1"></a-plane>
      <a-plane position="-4.95 2.5 0" rotation="0 90 0" width="4" height="3" material="src: #photo2"></a-plane>
      <a-plane position="4.95 2.5 0" rotation="0 -90 0" width="4" height="3" material="src: #photo3"></a-plane>
      
      <!-- Head (Custom Geometry) -->
      <a-entity geometry="primitive: sphere; radius: 0.8" position="0 1 -1.5" material="color: #ffcc66"></a-entity>
      
      <!-- Particle System (Hair) -->
      <a-entity id="hair" position="0 1.6 -1.5"></a-entity>
      
      <!-- Camera -->
      <a-entity id="camera" camera look-controls="max-pitch: 90" position="0 1.8 0"></a-entity>
    </a-scene>

    <script>
      AFRAME.registerComponent('hair', {
        schema: {
          texture: {type: 'string', default: '#hairTexture'},
          particleCount: {type: 'int', default: 1000},
          particleSize: {type: 'number', default: 0.1}
        },
        init: function () {
          const data = this.data;
          const el = this.el;

          const particles = new THREE.Geometry();
          const material = new THREE.PointsMaterial({
            size: data.particleSize,
            map: document.querySelector(data.texture),
            transparent: true,
            depthWrite: false
          });

          for (let i = 0; i < data.particleCount; i++) {
            const vertex = new THREE.Vector3();
            vertex.x = (Math.random() * 2 - 1) * 0.8;
            vertex.y = (Math.random() * 2 - 1) * 0.8;
            vertex.z = (Math.random() * 2 - 1) * 0.8;
            particles.vertices.push(vertex);
          }

          const particleSystem = new THREE.Points(particles, material);
          el.setObject3D('mesh', particleSystem);
        }
      });

      document.querySelector('#hair').setAttribute('hair', {});
    </script>
  </body>
</html>
